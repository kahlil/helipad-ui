(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8024)}])},8024:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return z}});var t=n(5893),s=n(949),o=n(8527),i=n(6723),c=n(5684),a=n(7233),l=n(9879),u={Podfriend:"https://pbs.twimg.com/profile_images/1307729215610068995/q3gdnuKS_400x400.jpg",Fountain:"https://pbs.twimg.com/profile_images/1421531707635904517/PSFSQdmP_400x400.jpg",Breez:"https://pbs.twimg.com/profile_images/1396954480822919172/Zs-kMWR2_400x400.jpg"};function x(e){var r=e.boostagram,n=e.compact;return r?(0,t.jsx)(o.xu,{pt:4,children:(0,t.jsx)(o.xv,{fontSize:n?"sm":"md",children:r})}):null}var f=function(e){var r=e.time,n=e.color;return(0,t.jsxs)(o.xv,{pt:2,fontSize:"xs",color:n,children:[(0,l.Z)(r)," ago"]})};function d(e){var r=e.time,n=e.value_msat,l=e.sender,d=e.app,p=e.podcast,m=e.message,h=e.compact,g=void 0!==h&&h,j=e.unread,b=void 0!==j&&j,v=(0,s.ff)("white","gray.700"),y=(0,s.ff)("gray.400","gray.500");return(0,t.jsxs)(o.xu,{px:4,pt:4,pb:2,position:"relative",bg:v,children:[(0,t.jsxs)(o.Kq,{direction:"row",spacing:4,children:[(0,t.jsx)(c.qE,{size:g?"md":"lg",name:d,src:d?u[d]:void 0,children:b&&!g?(0,t.jsx)(c.MX,{boxSize:"1em",bg:"green.400"}):null})," ",(0,t.jsxs)(a.kN,{children:[(0,t.jsxs)(a.Jf,{fontSize:g?"lg":"xl",children:[n," ",(0,t.jsx)("i",{className:"fak fa-satoshisymbol-solid"})]}),(0,t.jsxs)(a.vh,{fontSize:g?"xs":"md",children:["from ",(0,t.jsx)("strong",{children:l})," via ",(0,t.jsx)("strong",{children:d})," while listening to ",(0,t.jsx)("strong",{children:p})]})]})]}),(0,t.jsx)(x,{boostagram:m,compact:g}),b&&!g?(0,t.jsxs)(o.kC,{pt:4,children:[(0,t.jsx)(f,{time:r,color:y}),(0,t.jsx)(o.LZ,{}),(0,t.jsx)(i.zx,{size:"sm",children:"Mark as read"})]}):(0,t.jsx)(o.kC,{pt:0,children:(0,t.jsx)(f,{time:r,color:y})})]})}function p(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var m=function(e){var r=e.boosts,n=(0,s.ff)("gray.400","gray.600"),c=(0,s.ff)("gray.300","gray.600");return(0,t.jsx)(o.xu,{children:(0,t.jsxs)(o.Kq,{spacing:0,my:4,children:[(0,t.jsxs)(o.kC,{children:[(0,t.jsx)(o.X6,{pb:2,color:n,children:"Inbox"}),(0,t.jsx)(o.LZ,{}),(0,t.jsx)(i.zx,{variant:"link",children:"Show read boostagrams"})]}),(0,t.jsx)(o.xu,{p:4,bg:c,children:(0,t.jsx)(o.Kq,{spacing:1,height:"calc(100vh - 203px)",overflow:"scroll",children:r.map((function(e,r){return e.message?(0,t.jsx)(d,function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){p(e,r,n[r])}))}return e}({},e),r):null}))})})]})})};function h(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var g=function(e){var r=e.boosts,n=(0,s.ff)("gray.400","gray.600");return(0,t.jsx)(o.xu,{pr:{md:8},children:(0,t.jsxs)(o.xu,{my:4,children:[(0,t.jsx)(o.X6,{pb:2,color:n,children:"Stream"}),(0,t.jsx)(o.Kq,{spacing:1,height:"calc(100vh - 170px)",overflow:"scroll",children:r.map((function(e,r){return(0,t.jsx)(d,function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){h(e,r,n[r])}))}return e}({compact:!0},e),r)}))})]})})},j=function(e){var r=e.children,n=(0,s.ff)("gray.200","transparent");return(0,t.jsx)(o.xu,{bg:n,children:(0,t.jsx)(o.W2,{maxW:"72rem",children:(0,t.jsx)(o.xu,{display:{md:"flex"},children:r})})})},b=n(9876),v=function(){var e=(0,s.If)(),r=e.colorMode,n=e.toggleColorMode;return(0,t.jsxs)(o.xu,{children:[(0,t.jsx)(o.W2,{maxW:"72rem",children:(0,t.jsxs)(o.kC,{alignItems:"end",children:[(0,t.jsxs)(o.xu,{children:[(0,t.jsx)(o.X6,{mt:4,mb:2,size:"md",color:"gray.600",children:"Boostagram"}),(0,t.jsx)(o.xv,{size:"xs",mb:4,color:"light"==r?"gray.400":"gray.600",children:"The offical Podcasting 2.0 Boostagram app for Umbrel"})]}),(0,t.jsx)(o.LZ,{}),(0,t.jsx)(o.xu,{pb:4,children:(0,t.jsx)(o.rU,{fontSize:"md",href:"/boosts.csv",download:"boosts.csv",alt:"Download boosts CSV",title:"Download boosts CSV",_hover:{opacity:.7},children:(0,t.jsx)(b._8,{mx:"2px"})})}),(0,t.jsx)(i.zx,{size:"sm",mb:3,ml:4,variant:"ghost",onClick:n,title:"Toggle color mode",children:"light"===r?(0,t.jsx)(b.kL,{}):(0,t.jsx)(b.NW,{})})]})}),(0,t.jsx)(o.iz,{})]})},y=n(8520),w=n.n(y),_=n(7294);function k(e,r,n,t,s,o,i){try{var c=e[o](i),a=c.value}catch(l){return void n(l)}c.done?r(a):Promise.resolve(a).then(t,s)}function O(e){return function(){var r=this,n=arguments;return new Promise((function(t,s){var o=e.apply(r,n);function i(e){k(o,t,s,i,c,"next",e)}function c(e){k(o,t,s,i,c,"throw",e)}i(void 0)}))}}function S(e){e.map((function(e){var r;try{r=JSON.parse(e.tlv)}catch(n){console.error({message:"It looks like the TLV data could not be parsed as JSON.",error:n})}return r&&(e.value_msat=(r.value_msat_total||e.value_msat)/1e3,e.sender=r.sender_name||e.sender,e.app=r.app_name||e.app,e.message=r.message||e.message,e.podcast=r.podcast||e.podcast),e.time=1e3*e.time,e}))}var z=function(){var e=function(){var e=(0,_.useState)([]),r=e[0],n=e[1];return(0,_.useEffect)((function(){function e(){return(e=O(w().mark((function e(){var r,t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/boosts");case 2:return r=e.sent,e.next=5,r.json();case 5:S(t=e.sent),n(t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r}();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{}),(0,t.jsxs)(j,{children:[(0,t.jsx)(g,{boosts:e}),(0,t.jsx)(m,{boosts:e})]})]})}}},function(e){e.O(0,[433,774,888,179],(function(){return r=5301,e(e.s=r);var r}));var r=e.O();_N_E=r}]);