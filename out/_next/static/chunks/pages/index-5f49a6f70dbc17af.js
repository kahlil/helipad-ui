(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(8024)}])},8024:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return P}});var t=r(5893),o=r(949),s=r(8527),i=r(6723),a=r(7294),c=r(5684),l=r(7233),u=r(9879),d={Podfriend:"https://pbs.twimg.com/profile_images/1307729215610068995/q3gdnuKS_400x400.jpg",Fountain:"https://pbs.twimg.com/profile_images/1421531707635904517/PSFSQdmP_400x400.jpg",Breez:"https://pbs.twimg.com/profile_images/1396954480822919172/Zs-kMWR2_400x400.jpg"};function f(e){var n=e.boostagram,r=e.compact;return n?(0,t.jsx)(s.xu,{pt:4,children:(0,t.jsx)(s.xv,{fontSize:r?"sm":"md",children:n})}):null}var x=function(e){var n=e.time,r=e.color;return(0,t.jsxs)(s.xv,{pt:2,fontSize:"xs",color:r,children:[(0,u.Z)(n)," ago"]})};function m(e){e.index;var n=e.time,r=e.value_msat,a=e.sender,u=e.app,m=e.podcast,p=e.message,h=e.compact,g=void 0!==h&&h,j=e.unread,v=void 0!==j&&j,b=e.onToggleUnread,y=(0,o.ff)("white","gray.700"),w=(0,o.ff)("gray.400","gray.500");return(0,t.jsxs)(s.xu,{px:4,pt:4,pb:2,position:"relative",bg:y,children:[(0,t.jsxs)(s.Kq,{direction:"row",spacing:4,children:[(0,t.jsx)(c.qE,{size:g?"md":"lg",name:u,src:u?d[u]:void 0,children:v&&!g?(0,t.jsx)(c.MX,{boxSize:"1em",bg:"green.400"}):null})," ",(0,t.jsxs)(l.kN,{children:[(0,t.jsxs)(l.Jf,{fontSize:g?"lg":"xl",children:[r," ",(0,t.jsx)("i",{className:"fak fa-satoshisymbol-solid"})]}),(0,t.jsxs)(l.vh,{fontSize:g?"xs":"md",children:["from ",(0,t.jsx)("strong",{children:a})," via ",(0,t.jsx)("strong",{children:u})," while listening to ",(0,t.jsx)("strong",{children:m})]})]})]}),(0,t.jsx)(f,{boostagram:p,compact:g}),g?null:(0,t.jsxs)(s.kC,{pt:4,children:[(0,t.jsx)(x,{time:n,color:w}),(0,t.jsx)(s.LZ,{}),(0,t.jsxs)(i.zx,{size:"sm",onClick:b,children:["Mark as ",v?"read":"unread"]})]}),g?(0,t.jsx)(s.kC,{pt:4,children:(0,t.jsx)(x,{time:n,color:w})}):null]})}function p(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var h=function(e){var n=e.boosts,r=e.setBoosts,c=(0,a.useState)(!0),l=c[0],u=c[1],d=(0,o.ff)("gray.400","gray.600"),f=(0,o.ff)("gray.300","gray.600");return(0,t.jsx)(s.xu,{minWidth:{md:600},children:(0,t.jsxs)(s.Kq,{spacing:0,my:4,children:[(0,t.jsxs)(s.kC,{children:[(0,t.jsx)(s.X6,{pb:2,color:d,children:"Inbox"}),(0,t.jsx)(s.LZ,{}),(0,t.jsxs)(i.zx,{variant:"link",onClick:function(){return u(!l)},children:["Show ",l?"read":"unread"," boostagrams"]})]}),(0,t.jsx)(s.xu,{p:4,bg:f,children:(0,t.jsx)(s.Kq,{spacing:1,height:"calc(100vh - 203px)",overflow:"scroll",children:n.map((function(e){return e.message&&e.unread===l?(0,t.jsx)(m,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){p(e,n,r[n])}))}return e}({},e,{onToggleUnread:(o=e.index,function(){var e=n.map((function(e){return e.index===o&&(e.unread=!e.unread),e}));console.log({newBoosts:e}),r(e)})}),e.index):null;var o}))})})]})})};function g(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var j=function(e){var n=e.boosts,r=(0,o.ff)("gray.400","gray.600");return(0,t.jsx)(s.xu,{pr:{md:8},minWidth:{md:400},children:(0,t.jsxs)(s.xu,{my:4,children:[(0,t.jsx)(s.X6,{pb:2,color:r,children:"Stream"}),(0,t.jsx)(s.Kq,{spacing:1,height:"calc(100vh - 170px)",overflow:"scroll",children:n.map((function(e,n){return(0,t.jsx)(m,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){g(e,n,r[n])}))}return e}({compact:!0},e),n)}))})]})})},v=function(e){var n=e.children,r=(0,o.ff)("gray.200","transparent");return(0,t.jsx)(s.xu,{bg:r,children:(0,t.jsx)(s.W2,{maxW:"72rem",children:(0,t.jsx)(s.xu,{display:{md:"flex"},children:n})})})},b=r(9876),y=function(){var e=(0,o.If)(),n=e.colorMode,r=e.toggleColorMode;return(0,t.jsxs)(s.xu,{children:[(0,t.jsx)(s.W2,{maxW:"72rem",children:(0,t.jsxs)(s.kC,{alignItems:"end",children:[(0,t.jsxs)(s.xu,{children:[(0,t.jsx)(s.X6,{mt:4,mb:2,size:"md",color:"gray.600",children:"Boostagram"}),(0,t.jsx)(s.xv,{size:"xs",mb:4,color:"light"==n?"gray.400":"gray.600",children:"The offical Podcasting 2.0 Boostagram app for Umbrel"})]}),(0,t.jsx)(s.LZ,{}),(0,t.jsx)(s.xu,{pb:4,children:(0,t.jsx)(s.rU,{fontSize:"md",href:"/boosts.csv",download:"boosts.csv",alt:"Download boosts CSV",title:"Download boosts CSV",_hover:{opacity:.7},children:(0,t.jsx)(b._8,{mx:"2px"})})}),(0,t.jsx)(i.zx,{size:"sm",mb:3,ml:4,variant:"ghost",onClick:r,title:"Toggle color mode",children:"light"===n?(0,t.jsx)(b.kL,{}):(0,t.jsx)(b.NW,{})})]})}),(0,t.jsx)(s.iz,{})]})},w=r(8520),_=r.n(w);function k(e,n,r,t,o,s,i){try{var a=e[s](i),c=a.value}catch(l){return void r(l)}a.done?n(c):Promise.resolve(c).then(t,o)}function S(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var s=e.apply(n,r);function i(e){k(s,t,o,i,a,"next",e)}function a(e){k(s,t,o,i,a,"throw",e)}i(void 0)}))}}function O(e){e.map((function(e){var n;try{n=JSON.parse(e.tlv)}catch(r){console.error({message:"It looks like the TLV data could not be parsed as JSON.",error:r})}return n&&(e.value_msat=(n.value_msat_total||e.value_msat)/1e3,e.sender=n.sender_name||e.sender,e.app=n.app_name||e.app,e.message=n.message||e.message,e.podcast=n.podcast||e.podcast),e.time=1e3*e.time,e}))}function z(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=[],t=!0,o=!1,s=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done)&&(r.push(i.value),!n||r.length!==n);t=!0);}catch(c){o=!0,s=c}finally{try{t||null==a.return||a.return()}finally{if(o)throw s}}return r}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var P=function(){var e=z(function(){var e=(0,a.useState)([]),n=e[0],r=e[1];return(0,a.useEffect)((function(){function e(){return(e=S(_().mark((function e(){var n,t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/boosts");case 2:return n=e.sent,e.next=5,n.json();case 5:O(t=e.sent),r(t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),[n,r]}(),2),n=e[0],r=e[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y,{}),(0,t.jsxs)(v,{children:[(0,t.jsx)(j,{boosts:n}),(0,t.jsx)(h,{boosts:n,setBoosts:r})]})]})}}},function(e){e.O(0,[433,774,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);